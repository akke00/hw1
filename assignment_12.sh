#!/bin/bash

# Инициализация переменных
user_score=0  # Счет игрока
computer_score=0  # Счет компьютера
max_wins=3  # Количество побед для завершения игры (можно изменить)

# Массив с вариантами для игры
options=("Камень" "Ножницы" "Бумага")

# Функция для получения случайного выбора компьютера
get_computer_choice() {
    echo "${options[$((RANDOM % 3))]}"
}

# Функция для определения победителя раунда
determine_winner() {
    user=$1
    computer=$2

    if [ "$user" == "$computer" ]; then
        echo "Ничья!"
        return 0  # Ничья
    elif { [ "$user" == "Камень" ] && [ "$computer" == "Ножницы" ]; } ||
         { [ "$user" == "Ножницы" ] && [ "$computer" == "Бумага" ]; } ||
         { [ "$user" == "Бумага" ] && [ "$computer" == "Камень" ]; }; then
        echo "Вы выиграли раунд!"
        user_score=$((user_score + 1))
        return 1  # Победа пользователя
    else
        echo "Компьютер выиграл раунд!"
        computer_score=$((computer_score + 1))
        return 2  # Победа компьютера
    fi
}

# Основной цикл игры
echo "Добро пожаловать в игру 'Камень-ножницы-бумага'!"
echo "Играем до $max_wins побед одного из игроков."

while [ $user_score -lt $max_wins ] && [ $computer_score -lt $max_wins ]; do
    # Просим пользователя сделать выбор
    echo "Введите ваш выбор: Камень, Ножницы или Бумага"
    read -p "> " user_choice

    # Проверяем корректность ввода пользователя
    if [[ ! " ${options[*]} " =~ " ${user_choice} " ]]; then
        echo "Некорректный ввод. Попробуйте еще раз."
        continue
    fi

    # Получаем выбор компьютера
    computer_choice=$(get_computer_choice)
    echo "Компьютер выбрал: $computer_choice"

    # Определяем победителя раунда
    determine_winner "$user_choice" "$computer_choice"

    # Показываем текущий счет
    echo "Счет: Вы - $user_score | Компьютер - $computer_score"
    echo
done

# Определяем и выводим итоговый результат
if [ $user_score -gt $computer_score ]; then
    echo "Поздравляем! Вы выиграли игру со счетом $user_score:$computer_score!"
else
    echo "К сожалению, вы проиграли. Итоговый счет: $user_score:$computer_score."
fi

# Добро пожаловать в игру 'Камень-ножницы-бумага'!
# Играем до 3 побед одного из игроков.
# Введите ваш выбор: Камень, Ножницы или Бумага
# > Камень
# Компьютер выбрал: Ножницы
# Вы выиграли раунд!
# Счет: Вы - 1 | Компьютер - 0

# Введите ваш выбор: Камень, Ножницы или Бумага
# > Бумага
# Компьютер выбрал: Камень
# Вы выиграли раунд!
# Счет: Вы - 2 | Компьютер - 0

# Введите ваш выбор: Камень, Ножницы или Бумага
# > Ножницы
# Компьютер выбрал: Бумага
# Вы выиграли раунд!
# Счет: Вы - 3 | Компьютер - 0

# Поздравляем! Вы выиграли игру со счетом 3:0!

